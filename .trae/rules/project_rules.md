以下是完善后的 `project_rules.md` 内容，结合项目技术栈和电商小程序特点，从多个方面规范开发流程与代码质量：

# project_rules.md
## 一、角色与功能记录
- 角色：前端开发，负责微信小程序前端代码的开发与维护。
- 功能记录：每次新增功能后，需将新功能详细记录在项目的 `changelog.md` 文件中，记录应包含功能模块、实现要点、上线时间等关键信息。

## 二、技术栈规范
项目技术栈为 `taro`、`vue3`、`pinia`、`sass`、`typescript`、`nutui`，开发过程中需遵循各技术栈的官方最佳实践：
### （一）Taro 相关
- 页面与组件创建：严格按照 Taro 规定的命令行工具生成页面（`taro create page`）和组件（`taro create component`），保证项目结构的一致性。
- 跨端适配：充分利用 Taro 的跨端能力，但在编写代码时，要注意不同端（微信小程序等）的差异，针对差异点做好兼容处理，可通过条件编译等方式实现。

### （二）Vue3 相关
- 组合式 API：优先使用 Vue3 的组合式 API（`setup` 语法糖）进行组件逻辑编写，提高代码的可复用性与可维护性。
- 响应式数据：合理使用 `ref` 和 `reactive` 来创建响应式数据，明确两者的使用场景，对于简单类型数据使用 `ref`，复杂对象类型使用 `reactive`。

### （三）Pinia 相关
- Store 划分：根据业务模块合理划分 Pinia 的 Store，每个 Store 专注于处理特定模块的状态管理，避免 Store 过于臃肿。
- 状态操作：严格遵循 Pinia 的状态操作规范，通过 `actions` 来修改状态，禁止在组件中直接修改 Store 中的状态，保证状态管理的可追溯性。

### （四）sass 相关
- 样式命名：采用 BEM（Block - Element - Modifier）命名规范，增强样式的可读性与可维护性，例如 `block__element--modifier`。
- 样式复用：对于公共样式，提取到专门的 sass 公共文件中，通过 `@import` 方式引入使用，避免样式重复编写。

### （五）TypeScript 相关
- 类型定义：为所有的组件 props、函数参数与返回值等定义明确的 TypeScript 类型，利用接口（`interface`）或类型别名（`type`），提高代码的健壮性。
- 类型检查：在开发过程中，充分利用 TypeScript 的类型检查功能，及时解决类型错误，保证代码质量。

### （六）NutUI 相关
- 组件使用：按照 NutUI 的官方文档正确使用其组件，在使用过程中，若有自定义需求，优先考虑通过 NutUI 提供的插槽（slot）、自定义样式等方式进行扩展，避免直接修改组件源码。
- 主题定制：如需定制 NutUI 主题，需按照 NutUI 提供的主题定制方案，在项目的 sass 配置中进行变量覆盖等操作，保证主题风格的一致性。

## 三、项目模块规范
项目为通用电商小程序，包含首页、分类、购物车、个人中心等模块，各模块开发需遵循以下规范：
### （一）首页
- 数据加载：首页数据加载采用懒加载或分段加载策略，提升页面初始加载速度，可结合 Taro 的异步组件加载能力实现。
- 模块布局：首页各模块（如轮播图、推荐商品等）布局需遵循统一的设计规范，保证页面整体视觉效果的一致性。

### （二）分类
- 分类展示：分类数据展示需清晰明了，可采用侧边栏加内容区的经典分类布局方式，支持分类的多级展示。
- 筛选功能：分类页需提供丰富的筛选功能（如按价格、销量等筛选），筛选逻辑需与后端接口良好配合，保证筛选结果的准确性。

### （三）购物车
- 状态管理：购物车的商品选中状态、数量等信息通过 Pinia 进行集中管理，保证购物车状态在各组件间的同步。
- 结算逻辑：购物车结算逻辑需严谨，包含商品库存检查、价格计算、优惠活动应用等环节，确保结算数据的准确性。

### （四）个人中心
- 信息展示：个人中心需清晰展示用户的基本信息、订单状态等内容，信息展示格式需统一规范。
- 交互操作：个人中心的交互操作（如订单查询、地址管理等）需流程清晰，反馈及时，提升用户体验。

## 四、开发规范
### （一）代码提交
- 提交信息：代码提交信息需简洁明了，遵循“类型: 描述”的格式，类型包括 `feat`（新功能）、`fix`（修复 bug）、`docs`（文档修改）等。
- 提交频率：保证合理的代码提交频率，每个有意义的功能或 bug 修复都应进行独立提交，便于代码追溯与版本回滚。

### （二）代码审查
- 审查流程：建立代码审查机制，团队成员相互审查代码，重点检查代码的规范性、逻辑正确性、性能等方面。
- 问题修复：对于代码审查中发现的问题，需及时进行修复，并重新提交审查，直到代码符合规范。

### （三）测试规范
- 单元测试：针对关键的工具函数、组件等编写单元测试，使用合适的测试框架（如 Jest），保证代码的可靠性。
- 集成测试：对核心业务流程（如购物车结算、用户登录等）进行集成测试，验证各模块间的协作是否正常。

### （四）性能优化
- 包体积优化：关注项目的包体积大小，通过 Tree - Shaking、代码压缩等方式减小包体积，提升小程序的启动速度。
- 渲染优化：合理使用 Vue3 的渲染优化特性（如 `shallowRef`、`memo` 等），减少不必要的组件渲染，提升页面性能。

## 五、其他规范
### （一）文档规范
- 项目文档：及时更新项目的技术文档，包括架构设计文档、接口文档等，保证文档与代码的一致性。
- 注释规范：代码中添加必要的注释，注释需简洁清晰，说明代码的功能、逻辑等关键信息，便于其他开发者理解。

### （二）协作规范
- 沟通机制：团队成员之间建立有效的沟通机制，对于项目中的问题、需求变更等及时进行沟通交流。
- 任务分配：根据项目需求，合理分配开发任务，明确任务的责任人与时间节点，保证项目进度。